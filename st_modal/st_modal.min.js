class st_modal{overlay;container;target;#t;static#e(t){if(t instanceof Element)return t;try{return document.querySelector(t)||(()=>{throw new Error})()}catch{return document.body.appendChild((new DOMParser).parseFromString(t,"text/html").body.firstElementChild)}}constructor(t){t={zIndex:1e3,duration:.3,container:"body",overlay:!0,overlay_shading:.5,overlay_blur:"5px",location:"center center",position:"fixed",overflow:"auto",close_by_out:!0,close_by_esc:!0,auto_close:-1,close_button_attribute:'action="close"',state_attrubite:"state",can_interrupt:!0,showing_state:"showing",shown_state:"shown",hiding_state:"hiding",hidden_state:"hidden",before_open:()=>{},on_open:()=>{},before_close:()=>{},on_close:()=>{},...t};let e=[],o=[];t.overlay&&(t.zIndex++,this.overlay=document.createElement("overlay"),Object.assign(this.overlay.style,{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:`rgba(0, 0, 0, ${t.overlay_shading})`,backdropFilter:`blur(${t.overlay_blur})`,zIndex:t.zIndex,transition:`all ${t.duration}s`,display:"none"}),this.overlay.setAttribute(t.state_attrubite,t.hidden_state),t.close_by_out&&this.overlay.addEventListener("click",(()=>this.hide())),o.push(this.overlay)),this.container=document.createElement("container"),Object.assign(this.container.style,{position:t.position,overflow:t.overflow,width:"max-content",maxWidth:"100%",height:"max-content",zIndex:t.zIndex+1,transition:`all ${t.duration}s`,display:"none",...{"top left":{top:0,left:0},"top center":{top:0,left:"50%",transform:"translateX(-50%)"},"top right":{top:0,right:0},"center left":{top:"50%",left:0,transform:"translateY(-50%)"},"center center":{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},"center right":{top:"50%",right:0,transform:"translateY(-50%)"},"bottom left":{bottom:0,left:0},"bottom center":{bottom:0,left:"50%",transform:"translateX(-50%)"},"bottom right":{bottom:0,right:0}}[t.location]}),this.container.setAttribute(t.state_attrubite,t.hidden_state),o.push(this.container),this.target=st_modal.#e(t.target),this.container.append(this.target),this.target.querySelectorAll(`[${t.close_button_attribute}]`).forEach((t=>{t.addEventListener("click",(()=>this.hide()))})),t.close_by_out&&document.addEventListener("click",(t=>{this.container.contains(t.target)||this.hide()})),t.close_by_esc&&document.addEventListener("keydown",(t=>{"Escape"!==t.code&&27!==t.keyCode||this.hide()}));let n=(n,s,i,a,r)=>{n(),o.forEach(((o,n)=>{o.style.display="block",clearTimeout(e[n]),requestAnimationFrame((()=>{this.#t=i,o.setAttribute(t.state_attrubite,this.state)})),e[n]=setTimeout((()=>{this.#t=a,o.setAttribute(t.state_attrubite,this.state),r&&(o.style.display="none"),s()}),1e3*t.duration)}))};this.show=()=>{n(t.before_open,t.on_open,t.showing_state,t.shown_state,!1),clearTimeout(e[2]),t.auto_close>0&&(e[2]=setTimeout((()=>{this.hide(!0)}),1e3*t.auto_close))},this.hide=(e=!1)=>{(this.#t==t.shown_state||t.can_interrupt&&this.#t==t.showing_state||e)&&n(t.before_close,t.on_close,t.hiding_state,t.hidden_state,!0)},this.#t=t.hidden_state,st_modal.#e(t.container).append(...o)}get state(){return this.#t}}